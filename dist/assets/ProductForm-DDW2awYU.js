import{c as D,A as L,u as B,r as u,M as h,j as e,I as d,B as l,X as C}from"./index-bDYlqfgW.js";import{L as p}from"./label-DdT_m-Kl.js";import{C as x,a as g}from"./card-BQFpRLeq.js";import{p as M}from"./products-Bui-3MiF.js";import{P}from"./plus-DJev7S1x.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=D("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),_=()=>{var b,w;const{id:f}=L(),n=B(),r=!!f,F={id:Date.now(),name:"",description:"",price:0,category:"",images:["https://images.unsplash.com/photo-1573920111312-04f1b25c6b85?q=80&w=2948&auto=format&fit=crop"],features:[]},[t,i]=u.useState(F),[j,N]=u.useState(""),[v,y]=u.useState("");u.useEffect(()=>{if(r){const s=M.find(a=>a.id===Number(f));s?i(s):(h({title:"Product not found",description:"The product you're trying to edit doesn't exist.",variant:"destructive"}),n("/admin/products"))}},[f,r,n]);const o=s=>{const{name:a,value:c}=s.target;i(m=>({...m,[a]:a==="price"?parseFloat(c)||0:c}))},k=()=>{j.trim()&&(i(s=>({...s,features:[...s.features||[],j.trim()]})),N(""))},I=s=>{i(a=>{var c;return{...a,features:(c=a.features)==null?void 0:c.filter((m,q)=>q!==s)}})},A=()=>{v.trim()&&(i(s=>({...s,images:[...s.images,v.trim()]})),y(""))},S=s=>{t.images.length>1?i(a=>({...a,images:a.images.filter((c,m)=>m!==s)})):h({title:"Cannot remove all images",description:"A product must have at least one image.",variant:"destructive"})},E=s=>{if(s.preventDefault(),!t.name||!t.category||!t.description||t.price<=0){h({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}h({title:r?"Product updated":"Product created",description:`Successfully ${r?"updated":"created"} ${t.name}`}),n("/admin/products")};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:r?"Edit Product":"Add New Product"}),e.jsx("form",{onSubmit:E,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(x,{children:e.jsxs(g,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",children:"Product Name"}),e.jsx(d,{id:"name",name:"name",value:t.name,onChange:o,placeholder:"Enter product name",className:"mt-1",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"category",children:"Category"}),e.jsx(d,{id:"category",name:"category",value:t.category,onChange:o,placeholder:"e.g. Smartphones, Laptops",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"price",children:"Price ($)"}),e.jsx(d,{id:"price",name:"price",type:"number",min:"0.01",step:"0.01",value:t.price,onChange:o,className:"mt-1",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:o,rows:4,className:"flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 mt-1",placeholder:"Describe your product...",required:!0})]})]})]})}),e.jsx(x,{children:e.jsxs(g,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Product Features"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{value:j,onChange:s=>N(s.target.value),placeholder:"Add a feature...",className:"flex-1"}),e.jsxs(l,{type:"button",onClick:k,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add"]})]}),e.jsxs("div",{className:"space-y-2",children:[(b=t.features)==null?void 0:b.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsx("span",{children:s}),e.jsx(l,{type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>I(a),children:e.jsx(C,{className:"h-4 w-4"})})]},a)),!((w=t.features)!=null&&w.length)&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No features added yet. Add some features to highlight your product."})]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{children:e.jsxs(g,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Product Images"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{value:v,onChange:s=>y(s.target.value),placeholder:"Image URL...",className:"flex-1"}),e.jsxs(l,{type:"button",onClick:A,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.images.map((s,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Product ${a+1}`,className:"h-24 w-full object-cover rounded"}),e.jsx(l,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>S(a),children:e.jsx(C,{className:"h-3 w-3"})})]},a))})]})]})}),e.jsx(x,{children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(l,{type:"submit",className:"w-full",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),r?"Update Product":"Create Product"]}),e.jsx(l,{type:"button",variant:"outline",className:"w-full",onClick:()=>n("/admin/products"),children:"Cancel"})]})})})]})]})})]})};export{_ as default};
